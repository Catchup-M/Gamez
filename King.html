<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Landscape Game â€“ Single Sprite Only</title>

<meta name="viewport"
      content="width=device-width,
               height=device-height,
               initial-scale=1.0,
               user-scalable=no" />

<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  background: #000;
}

canvas {
  display: block;
}

/* Ground */
#ground {
  position: absolute;
  left: 0;
  bottom: -5px;
  height: 12vw;
  min-height: 80px;
  max-height: 140px;
  z-index: 5;
  pointer-events: none;
}

/* CSS-controlled character position */
#character-anchor {
  position: absolute;
  left: 50px;
  bottom: 100px; /* YOU CONTROL THIS */
  width: 120px;
  height: 160px;
  visibility: hidden;
}
</style>
</head>

<body>

<canvas id="gameCanvas"></canvas>
<div id="character-anchor"></div>

<img
  id="ground"
  src="images/file_00000000ba6471f4917611ec1970cd28-removebg-preview.png"
/>

<script>
/* =====================
   CANVAS
   ===================== */
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener('resize', resizeCanvas);
resizeCanvas();

/* =====================
   LOAD & CROP SPRITE (ðŸ”¥ FIX)
   ===================== */
const rawSprite = new Image();
rawSprite.src = 'images/Character1.png';

const frameWidth = 120;
const frameHeight = 160;

/* Offscreen canvas (crop top sprite ONLY) */
const croppedCanvas = document.createElement('canvas');
croppedCanvas.width = frameWidth;
croppedCanvas.height = frameHeight;
const croppedCtx = croppedCanvas.getContext('2d');

rawSprite.onload = () => {
  croppedCtx.clearRect(0, 0, frameWidth, frameHeight);

  // ðŸ”¥ ONLY TOP GREEN SPRITE
  croppedCtx.drawImage(
    rawSprite,
    0, 0,                 // source X,Y (TOP ONLY)
    frameWidth, frameHeight,
    0, 0,
    frameWidth, frameHeight
  );

  startGame();
};

/* =====================
   POSITION FROM CSS
   ===================== */
const anchor = document.getElementById('character-anchor');

function getCharPos() {
  const r = anchor.getBoundingClientRect();
  return { x: r.left, y: r.top };
}

/* =====================
   GAME LOOP
   ===================== */
function startGame() {
  function loop() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    const pos = getCharPos();

    // âœ… ONLY CROPPED IMAGE DRAWS
    ctx.drawImage(
      croppedCanvas,
      pos.x,
      pos.y,
      frameWidth,
      frameHeight
    );

    requestAnimationFrame(loop);
  }
  loop();
}
</script>

</body>
</html>
